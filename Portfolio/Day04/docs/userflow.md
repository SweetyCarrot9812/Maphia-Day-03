# User Flow: 체험단 매칭 플랫폼

## Meta
- 작성일: 2025-11-07
- 작성자: 개발자
- 버전: 1.0

---

## 목차
1. [회원가입 및 역할 선택](#기능-1-회원가입-및-역할-선택)
2. [광고주 정보 입력](#기능-2-광고주-정보-입력)
3. [인플루언서 정보 입력](#기능-3-인플루언서-정보-입력)
4. [로그인](#기능-4-로그인)
5. [체험단 등록 (광고주)](#기능-5-체험단-등록-광고주)
6. [체험단 지원 (인플루언서)](#기능-6-체험단-지원-인플루언서)
7. [체험단 관리 및 인플루언서 선정 (광고주)](#기능-7-체험단-관리-및-인플루언서-선정-광고주)
8. [체험단 탐색 (공통)](#기능-8-체험단-탐색-공통)

---

## 기능 1: 회원가입 및 역할 선택

### 1. 입력 (User Actions)
- **트리거**: 사용자가 "회원가입" 버튼 클릭
- **입력 데이터**:
  - 이메일 (필수, 이메일 형식)
  - 비밀번호 (필수, 8자 이상)
  - 비밀번호 확인 (필수, 비밀번호와 일치)
  - 이름 (필수, 2-20자)
  - 생년월일 (필수, YYYY-MM-DD)
  - 휴대폰번호 (필수, 010-XXXX-XXXX)
  - 역할 선택 (필수, 광고주/인플루언서)

### 2. 처리 (System Logic)
**정상 플로우**:
1. 기본 정보 입력 및 클라이언트 검증
2. 역할 선택 (광고주/인플루언서)
3. 서버 검증 (이메일 중복, 입력값 유효성)
4. 사용자 계정 생성 (users 테이블)
5. 역할에 따른 추가 정보 입력 페이지로 리다이렉트

**예외 처리**:
- 이메일 중복 → "이미 사용 중인 이메일입니다" 에러
- 입력값 검증 실패 → 해당 필드별 에러 메시지
- 서버 오류 → "일시적 오류가 발생했습니다. 잠시 후 다시 시도해주세요"

### 3. 출력 (User Feedback)
**성공 시**:
- UI: 선택한 역할에 따른 추가 정보 입력 페이지로 이동
- 사이드이펙트: 환영 이메일 발송 (선택), 가입 로그 기록

**실패 시**:
- UI: 해당 필드 하단에 에러 메시지, 입력값 유지
- 복구 경로: 오류 수정 후 재시도 가능

### 엣지케이스 체크리스트
- [x] 중복 데이터 (이미 존재하는 이메일)
- [x] 네트워크 오류 (API 타임아웃)
- [x] 입력 검증 실패 (이메일 형식, 비밀번호 정책)
- [x] 권한 부족 (해당 없음 - 회원가입은 모두 가능)
- [ ] 동시성 이슈 (동일 이메일 동시 가입 시도)

---

## 기능 2: 광고주 정보 입력

### 1. 입력 (User Actions)
- **트리거**: 회원가입 후 역할 선택에서 "광고주" 선택
- **입력 데이터**:
  - 업체명 (필수, 2-50자)
  - 주소 (필수, 도로명 또는 지번 주소)
  - 업장 전화번호 (필수, 02-XXXX-XXXX 또는 031-XXX-XXXX 형식)
  - 사업자등록번호 (필수, XXX-XX-XXXXX 형식)
  - 대표자명 (필수, 2-20자)

### 2. 처리 (System Logic)
**정상 플로우**:
1. 입력값 클라이언트 검증 (형식, 필수값)
2. 서버 검증 (사업자등록번호 중복 체크)
3. 광고주 정보 저장 (advertisers 테이블)
4. 사용자 역할 업데이트 (users.role = 'advertiser')
5. 광고주 대시보드로 리다이렉트

**예외 처리**:
- 사업자등록번호 중복 → "이미 등록된 사업자등록번호입니다"
- 사업자등록번호 형식 오류 → "올바른 사업자등록번호 형식을 입력해주세요"
- 전화번호 형식 오류 → "올바른 전화번호 형식을 입력해주세요"

### 3. 출력 (User Feedback)
**성공 시**:
- UI: 광고주 대시보드로 이동, "광고주 정보 등록이 완료되었습니다" 토스트
- 사이드이펙트: 승인 검토 이메일 발송 (선택), 등록 로그 기록

**실패 시**:
- UI: 해당 필드별 에러 메시지 표시, 입력값 유지
- 복구 경로: 오류 수정 후 재시도

### 엣지케이스 체크리스트
- [x] 중복 데이터 (사업자등록번호 중복)
- [x] 네트워크 오류 (서버 응답 실패)
- [x] 입력 검증 실패 (형식 오류, 필수값 누락)
- [ ] 권한 부족 (이미 다른 역할로 등록된 경우)
- [ ] 동시성 이슈 (동일 사업자등록번호 동시 등록)

---

## 기능 3: 인플루언서 정보 입력

### 1. 입력 (User Actions)
- **트리거**: 회원가입 후 역할 선택에서 "인플루언서" 선택
- **입력 데이터**:
  - SNS 채널명 (필수, 2-30자)
  - 채널 링크 (필수, URL 형식)
  - 팔로워 수 (필수, 숫자, 최소 100명)
  - 주요 카테고리 (선택, 뷰티/패션/푸드/테크/라이프 등)

### 2. 처리 (System Logic)
**정상 플로우**:
1. 입력값 클라이언트 검증 (URL 형식, 팔로워 수 최소값)
2. 서버 검증 (채널 링크 중복 체크)
3. 인플루언서 정보 저장 (influencers 테이블)
4. 사용자 역할 업데이트 (users.role = 'influencer')
5. 홈페이지(체험단 목록)로 리다이렉트

**예외 처리**:
- 채널 링크 중복 → "이미 등록된 채널입니다"
- URL 형식 오류 → "올바른 URL을 입력해주세요"
- 팔로워 수 부족 → "최소 100명 이상의 팔로워가 필요합니다"

### 3. 출력 (User Feedback)
**성공 시**:
- UI: 홈페이지로 이동, "인플루언서 정보 등록이 완료되었습니다. 이제 체험단에 지원하실 수 있습니다" 토스트
- 사이드이펙트: 환영 이메일 발송, 추천 체험단 안내

**실패 시**:
- UI: 해당 필드별 에러 메시지 표시, 입력값 유지
- 복구 경로: 오류 수정 후 재시도

### 엣지케이스 체크리스트
- [x] 중복 데이터 (채널 링크 중복)
- [x] 네트워크 오류 (서버 응답 실패)
- [x] 입력 검증 실패 (URL 형식, 팔로워 수 미달)
- [ ] 권한 부족 (이미 다른 역할로 등록된 경우)
- [ ] 동시성 이슈 (동일 채널 동시 등록)

---

## 기능 4: 로그인

### 1. 입력 (User Actions)
- **트리거**: 사용자가 "로그인" 버튼 클릭
- **입력 데이터**:
  - 이메일 (필수, 이메일 형식)
  - 비밀번호 (필수, 8자 이상)
  - 로그인 상태 유지 (선택, 체크박스)

### 2. 처리 (System Logic)
**정상 플로우**:
1. 이메일 형식 검증
2. DB에서 사용자 조회 (users 테이블)
3. 비밀번호 해시 비교
4. 세션 생성 또는 JWT 토큰 발급
5. 사용자 역할에 따른 페이지 리다이렉트
   - 광고주: 광고주 대시보드
   - 인플루언서: 홈페이지 (체험단 목록)
   - 역할 미선택: 역할 선택 페이지

**예외 처리**:
- 이메일 미존재 → "등록되지 않은 이메일입니다"
- 비밀번호 불일치 → "비밀번호가 틀렸습니다" (3회 실패 시 계정 일시 잠금)
- 계정 비활성화 → "비활성화된 계정입니다. 관리자에게 문의하세요"

### 3. 출력 (User Feedback)
**성공 시**:
- UI: 역할별 메인 페이지로 이동, "환영합니다" 토스트 메시지
- 사이드이펙트: 로그인 로그 기록, 마지막 로그인 시간 업데이트

**실패 시**:
- UI: 입력 필드 하단에 에러 메시지, 포커스 유지
- 복구 경로: "비밀번호 찾기" 링크 제공

### 엣지케이스 체크리스트
- [x] 중복 데이터: N/A (로그인)
- [x] 네트워크 오류: "서버 연결 실패. 잠시 후 다시 시도하세요"
- [x] 입력 검증 실패: 이메일 형식 오류, 빈 필드
- [x] 권한 부족: 계정 잠금, 비활성화 상태
- [x] 동시성 이슈: 세션 중복 생성 방지

---

## 기능 5: 체험단 등록 (광고주)

### 1. 입력 (User Actions)
- **트리거**: 광고주 대시보드에서 "새 체험단 등록" 버튼 클릭
- **입력 데이터**:
  - 체험단 제목 (필수, 10-100자)
  - 제품/서비스 설명 (필수, 50-1000자)
  - 모집 인원 (필수, 1-50명)
  - 모집 마감일 (필수, 오늘 이후 날짜)
  - 체험 기간 (필수, 1-30일)
  - 제공 혜택 (필수, 예: 제품 무료 제공 + 리뷰 수수료)
  - 카테고리 (필수, 뷰티/패션/푸드/테크/라이프 등)

### 2. 처리 (System Logic)
**정상 플로우**:
1. 광고주 권한 확인 (advertisers 테이블 존재 여부)
2. 입력값 검증 (필수값, 글자 수, 날짜 유효성)
3. 체험단 생성 (campaigns 테이블)
4. 상태를 '모집중'으로 설정
5. 광고주 대시보드로 리다이렉트

**예외 처리**:
- 권한 부족 → "광고주 정보 등록 후 이용 가능합니다"
- 마감일 과거 날짜 → "모집 마감일은 오늘 이후로 설정해주세요"
- 글자 수 초과/미달 → "제목은 10-100자로 입력해주세요"

### 3. 출력 (User Feedback)
**성공 시**:
- UI: 광고주 대시보드로 이동, "체험단이 등록되었습니다" 토스트
- 사이드이펙트: 체험단 목록에 노출, 등록 알림 이메일

**실패 시**:
- UI: 해당 필드별 에러 메시지, 입력값 유지
- 복구 경로: 오류 수정 후 재시도

### 엣지케이스 체크리스트
- [x] 중복 데이터: 동일 제목 허용 (다른 광고주와 구분)
- [x] 네트워크 오류: "등록 실패. 잠시 후 다시 시도하세요"
- [x] 입력 검증 실패: 필수값 누락, 형식 오류
- [x] 권한 부족: 광고주 정보 미등록 상태
- [x] 동시성 이슈: 중복 등록 방지 (버튼 비활성화)

---

## 기능 6: 체험단 지원 (인플루언서)

### 1. 입력 (User Actions)
- **트리거**: 체험단 상세 페이지에서 "지원하기" 버튼 클릭
- **입력 데이터**:
  - 지원 동기 (필수, 50-500자)
  - 예상 리뷰 발행일 (필수, 체험 기간 내)
  - 리뷰 예상 조회수 (선택, 숫자)
  - 포트폴리오 링크 (선택, URL)

### 2. 처리 (System Logic)
**정상 플로우**:
1. 인플루언서 권한 확인 (influencers 테이블 존재 여부)
2. 체험단 모집 상태 확인 ('모집중' 여부)
3. 중복 지원 여부 체크
4. 지원서 저장 (applications 테이블)
5. 지원 완료 페이지 표시

**예외 처리**:
- 권한 부족 → "인플루언서 정보 등록 후 지원 가능합니다"
- 모집 마감 → "이미 마감된 체험단입니다"
- 중복 지원 → "이미 지원한 체험단입니다"
- 인원 초과 → "모집 인원이 초과되어 지원할 수 없습니다"

### 3. 출력 (User Feedback)
**성공 시**:
- UI: 지원 완료 페이지, "지원이 완료되었습니다" 메시지
- 사이드이펙트: 광고주에게 지원 알림, 지원 현황 업데이트

**실패 시**:
- UI: 에러 메시지와 함께 체험단 상세 페이지 유지
- 복구 경로: 다른 체험단 탐색 안내

### 엣지케이스 체크리스트
- [x] 중복 데이터: 동일 인플루언서 중복 지원 방지
- [x] 네트워크 오류: "지원 실패. 다시 시도하세요"
- [x] 입력 검증 실패: 지원 동기 글자 수, 날짜 유효성
- [x] 권한 부족: 인플루언서 정보 미등록
- [x] 동시성 이슈: 동시 지원 시 인원 초과 방지

---

## 기능 7: 체험단 관리 및 인플루언서 선정 (광고주)

### 1. 입력 (User Actions)
- **트리거**: 광고주 대시보드에서 "체험단 관리" 또는 체험단 상세 페이지 접근
- **입력 데이터**:
  - 모집 조기 종료 (버튼 클릭)
  - 인플루언서 선정 (체크박스 선택 + "선정 완료" 버튼)
  - 선정 사유 (선택, 0-200자)

### 2. 처리 (System Logic)
**정상 플로우**:
1. 광고주 권한 및 체험단 소유권 확인
2. **모집 조기 종료**:
   - 체험단 상태를 '모집중' → '모집마감'으로 변경
   - 미선정 지원자들에게 마감 알림
3. **인플루언서 선정**:
   - 모집 마감된 체험단만 선정 가능
   - 선택된 지원자 상태를 '선정됨'으로 변경
   - 미선정자는 '미선정'으로 변경
   - 체험단 상태를 '진행중'으로 변경

**예외 처리**:
- 권한 부족 → "본인이 등록한 체험단만 관리할 수 있습니다"
- 잘못된 상태 → "이미 종료된 체험단입니다"
- 선정 인원 초과 → "모집 인원을 초과할 수 없습니다"
- 선정자 없음 → "최소 1명 이상 선정해주세요"

### 3. 출력 (User Feedback)
**성공 시**:
- **조기 종료**: "모집이 종료되었습니다" 토스트, 상태 업데이트
- **인플루언서 선정**: "인플루언서 선정이 완료되었습니다" 토스트, 선정자 목록 표시
- 사이드이펙트: 선정/미선정 이메일 발송, 체험 시작 안내

**실패 시**:
- UI: 에러 메시지 표시, 이전 상태 유지
- 복구 경로: 조건 확인 후 재시도 안내

### 엣지케이스 체크리스트
- [x] 중복 데이터: 이미 선정된 인플루언서 재선정 방지
- [x] 네트워크 오류: "처리 실패. 다시 시도하세요"
- [x] 입력 검증 실패: 선정 인원 초과, 필수 선택 누락
- [x] 권한 부족: 타인의 체험단 접근 시도
- [x] 동시성 이슈: 동시 선정 시 인원 초과 방지

---

## 기능 8: 체험단 탐색 (공통)

### 1. 입력 (User Actions)
- **트리거**: 홈페이지 접속, 체험단 목록 페이지 접근
- **입력 데이터**:
  - 검색어 (선택, 제목/설명 검색)
  - 카테고리 필터 (선택, 뷰티/패션/푸드/테크/라이프/전체)
  - 상태 필터 (선택, 모집중/모집마감/진행중/전체)
  - 정렬 기준 (선택, 최신순/마감임박순/인기순)
  - 페이지네이션 (페이지 번호)

### 2. 처리 (System Logic)
**정상 플로우**:
1. 입력된 필터 조건 검증
2. DB에서 체험단 목록 조회 (campaigns 테이블)
3. 필터링 및 정렬 적용
4. 페이지네이션 처리 (20개씩)
5. 각 체험단별 기본 정보 표시
   - 제목, 요약 설명, 모집 인원/지원자 수, 마감일, 카테고리, 상태

**예외 처리**:
- 검색 결과 없음 → "검색 결과가 없습니다" 메시지
- 잘못된 페이지 → 첫 페이지로 리다이렉트
- 서버 오류 → "일시적 오류. 새로고침 해주세요"

### 3. 출력 (User Feedback)
**성공 시**:
- UI: 체험단 목록 카드 형태로 표시
- 각 카드별 정보:
  - 체험단 이미지 (기본 이미지)
  - 제목, 업체명
  - 모집 인원 (예: 3/10명)
  - 마감일 (D-5 형태)
  - 카테고리 태그
  - 지원하기/상세보기 버튼
- 페이지네이션 컨트롤

**실패 시**:
- UI: 에러 메시지 또는 빈 상태 표시
- 복구 경로: 필터 초기화, 새로고침 버튼

### 엣지케이스 체크리스트
- [x] 중복 데이터: N/A (조회만)
- [x] 네트워크 오류: "목록을 불러올 수 없습니다"
- [x] 입력 검증 실패: 잘못된 페이지 번호, 필터 값
- [x] 권한 부족: N/A (모든 사용자 접근 가능)
- [x] 동시성 이슈: 실시간 지원자 수 업데이트

---

## 의존성 & 연계

- **회원가입** → **역할별 정보 입력**: 필수 연계 (역할 선택 후 바로 진행)
- **광고주 정보 입력** → **체험단 등록**: 광고주 정보 완료 후 체험단 등록 가능
- **인플루언서 정보 입력** → **체험단 지원**: 인플루언서 정보 완료 후 지원 가능
- **체험단 등록** → **체험단 관리**: 등록한 체험단만 관리 가능
- **체험단 지원** → **인플루언서 선정**: 지원자가 있어야 선정 가능

---

## 오픈 이슈

- [ ] 2025-11-07 결정 필요: 회원가입 시 이메일 인증 프로세스 추가 여부
- [ ] 2025-11-07 결정 필요: 비밀번호 찾기/재설정 기능 구현 범위
- [ ] 2025-11-07 결정 필요: 체험단 지원 시 첨부파일 업로드 기능 필요 여부
- [ ] 2025-11-07 결정 필요: 광고주 승인 프로세스 (자동 승인 vs 관리자 승인)